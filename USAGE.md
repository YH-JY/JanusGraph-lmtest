# 使用指南

## 快速开始

1. **确保环境准备**
   - JanusGraph运行在: 192.168.40.129:8182
   - K8s集群配置文件: ~/.kube/config
   - Python 3.8+ 和 Node.js 14+

2. **启动应用**
   ```bash
   cd /workspace/janusgraph-k8s-platform
   chmod +x start.sh
   ./start.sh
   ```

3. **打开浏览器**
   - 访问: http://localhost:3000
   - 点击"执行完整流程"按钮

## 核心功能

### 1. 仪表板概览
- 查看K8s资源统计
- 监控安全风险指标
- 分析风险因素

### 2. 数据收集与图构建
- 选择命名空间（可选）
- 收集K8s资产数据
- 构建JanusGraph图数据库

### 3. 图谱可视化
- 查看云原生资产关系图
- 交互式缩放和拖拽
- 节点类型和风险级别展示

### 4. 攻击路径分析
- 搜索潜在攻击路径
- 评估路径风险等级
- 查看详细攻击时序

## 数据模型

### 节点类型
- **Namespace**: K8s命名空间
- **Pod**: 容器组
- **Service**: 服务
- **Deployment**: 部署
- **ClusterRole**: 集群角色

### 关系类型
- **contains**: 包含关系
- **exposes**: 暴露关系
- **manages**: 管理关系
- **potential_escalation**: 潜在权限提升

## 安全分析

### 风险因素检测
- 特权容器识别
- 暴露服务发现
- 高权限角色分析
- 攻击路径生成

### 风险等级
- **High**: 高风险（红色）
- **Medium**: 中风险（橙色）
- **Low**: 低风险（绿色）

## 常见操作

### 完整数据流程
1. 点击顶部"执行完整流程"
2. 自动收集K8s数据
3. 构建图数据库
4. 跳转到可视化页面

### 分步操作
1. 访问"K8s数据收集"页面
2. 选择命名空间并收集数据
3. 构建图数据库
4. 查看可视化图谱
5. 分析攻击路径

### 过滤和搜索
- 按命名空间过滤节点
- 按节点类型搜索路径
- 设置路径深度限制
- 查看节点详细信息

## 注意事项

1. **权限要求**
   - 确保K8s集群有足够权限
   - JanusGraph需要可写权限

2. **性能考虑**
   - 大规模集群可能需要较长收集时间
   - 图数据量大时可能影响可视化性能

3. **数据安全**
   - 敏感数据仅在本地处理
   - 不上传到外部服务

## 获取帮助

- 查看详细部署文档: [DEPLOYMENT.md](./DEPLOYMENT.md)
- API接口说明: 查看后端源码注释
- 问题反馈: 检查控制台错误日志